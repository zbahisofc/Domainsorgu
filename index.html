<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Domain Range Checker (APILayer)</title>
<style>
body {
  background: #0d1117;
  color: #A9EE16;
  font-family: Inter, sans-serif;
  text-align: center;
  padding: 40px;
}
h1 {
  text-shadow: 0 0 8px #A9EE16;
}
input, button {
  padding: 10px;
  margin: 5px;
  border-radius: 6px;
  border: none;
  font-size: 14px;
}
input {
  width: 180px;
  text-align: center;
  background: #111;
  color: #A9EE16;
}
button {
  background: linear-gradient(90deg, #A9EE16, #73D400);
  color: #000;
  font-weight: bold;
  cursor: pointer;
}
button:hover { transform: scale(1.05); }
#results {
  margin-top: 30px;
  max-width: 600px;
  margin-inline: auto;
  background: rgba(255,255,255,0.05);
  padding: 20px;
  border-radius: 10px;
  text-align: left;
}
.available { color: #00FF8C; }
.registered { color: #FF4444; }
.loading { color: #FFD700; }
footer { margin-top: 30px; font-size: 12px; color: #777; }
</style>
</head>
<body>

<h1>ğŸ” Domain Range Checker (APILayer)</h1>
<p>Ã–rnek: zbahis300.com â†’ zbahis500.com</p>

<input id="startDomain" placeholder="BaÅŸlangÄ±Ã§ (Ã¶r: zbahis300.com)">
<input id="endDomain" placeholder="BitiÅŸ (Ã¶r: zbahis500.com)">
<br>
<button onclick="checkRange()">TARA</button>
<button onclick="downloadCSV()">CSV Ä°ndir</button>

<div id="results"></div>
<footer>Â© 2025 Domain Checker | APILayer Whois API ile Ã§alÄ±ÅŸÄ±r</footer>

<script>
const API_KEY = "LUyGjnll5mLpe7s64P52oGEBWJA0ARl3"; // ğŸ”‘ Kendi APILayer keyâ€™in

let results = [];

async function checkRange() {
  const startDomain = document.getElementById("startDomain").value.trim();
  const endDomain = document.getElementById("endDomain").value.trim();
  const resultDiv = document.getElementById("results");
  resultDiv.innerHTML = "";
  results = [];

  if (!startDomain || !endDomain) {
    alert("LÃ¼tfen baÅŸlangÄ±Ã§ ve bitiÅŸ domainlerini girin!");
    return;
  }

  const startNum = parseInt(startDomain.match(/\d+/));
  const endNum = parseInt(endDomain.match(/\d+/));
  const prefix = startDomain.replace(startNum, "").split(".")[0];
  const tld = startDomain.split(".")[1] || "com";

  if (isNaN(startNum) || isNaN(endNum) || startNum >= endNum) {
    alert("GeÃ§erli bir sayÄ± aralÄ±ÄŸÄ± girin!");
    return;
  }

  for (let i = startNum; i <= endNum; i++) {
    const domain = `${prefix}${i}.${tld}`;
    appendResult(domain, "loading", "SorgulanÄ±yor...");
    await checkDomain(domain);
    await new Promise(r => setTimeout(r, 300)); // 0.3 sn gecikme
  }
}

async function checkDomain(domain) {
  var myHeaders = new Headers();
  myHeaders.append("apikey", API_KEY);

  var requestOptions = {
    method: 'GET',
    redirect: 'follow',
    headers: myHeaders
  };

  const url = `https://api.apilayer.com/whois/check?domain=${domain}`;

  try {
    const response = await fetch(url, requestOptions);
    if (!response.ok) {
      updateResult(domain, "error", `HTTP ${response.status}`);
      results.push({ domain, status: "error", info: `HTTP ${response.status}` });
      return;
    }

    const data = await response.json();
    if (data && data.result === "AVAILABLE") {
      updateResult(domain, "available", "BoÅŸ");
      results.push({ domain, status: "available", info: "Available" });
    } else if (data && data.result === "UNAVAILABLE") {
      updateResult(domain, "registered", "KayÄ±tlÄ±");
      results.push({ domain, status: "registered", info: "Registered" });
    } else {
      updateResult(domain, "error", "Bilinmeyen YanÄ±t");
      results.push({ domain, status: "error", info: "Unknown" });
    }
  } catch (err) {
    updateResult(domain, "error", err.message);
    results.push({ domain, status: "error", info: err.message });
  }
}

function appendResult(domain, cls, msg) {
  const el = document.createElement("div");
  el.id = domain;
  el.innerHTML = `<div class="${cls}">${domain} â†’ ${msg}</div>`;
  document.getElementById("results").appendChild(el);
}

function updateResult(domain, cls, msg) {
  const el = document.getElementById(domain);
  if (el) el.innerHTML = `<div class="${cls}">${cls === 'available' ? 'âœ…' : cls === 'registered' ? 'âŒ' : 'âš ï¸'} ${domain} â†’ ${msg}</div>`;
}

function downloadCSV() {
  if (results.length === 0) {
    alert("HenÃ¼z sonuÃ§ yok!");
    return;
  }
  let csv = "Domain,Status,Info\n";
  results.forEach(r => csv += `${r.domain},${r.status},${r.info}\n`);
  const blob = new Blob([csv], { type: "text/csv;charset=utf-8;" });
  const link = document.createElement("a");
  link.href = URL.createObjectURL(blob);
  link.download = "domain_results.csv";
  document.body.appendChild(link);
  link.click();
  document.body.removeChild(link);
}
</script>

</body>
</html>
